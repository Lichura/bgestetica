
<div id="scheduler_here" class="dhx_cal_container" style='width:100%; height:80vh;'>
 <div class="dhx_cal_navline">
   <div class="dhx_cal_prev_button">&nbsp;</div>
   <div class="dhx_cal_next_button">&nbsp;</div>
   <div class="dhx_cal_today_button"></div>
   <div class="dhx_cal_date"></div>
   <div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div>
   <div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div>
   <div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>
 </div>
 <div class="dhx_cal_header">
 </div>
 <div class="dhx_cal_data">
 </div>
</div>
 
<script>
    scheduler.config.xml_date="%Y-%m-%d %H:%i";
    scheduler.init("scheduler_here");
    scheduler.load("<%= data_path %>", "json");
    var dp = new dataProcessor("<%= db_action_path %>");
    dp.init(scheduler);
    dp.setTransactionMode("GET", false);



 
    var medicos_opts = [];

    for (var i = 1; i < 4; i++){
      var nuevo_medico = {};
      nuevo_medico.key = i;
      nuevo_medico.label = "medico " + i;
      medicos_opts.push(nuevo_medico);
    };

    console.log(medicos_opts);
    
    var equipos = <%= raw @equipos %>;
    var equipos_opt = [];
    for (var i = 1; i < equipos.lenght, i++){
      var nuevo_equipo ={};
      nuevo_equipo.key = nuevo_equipo[i].key;
      nuevo_equipo.label = nuevo_equipo[i].label;
      equipos_opt.push(nuevo_equipo);
    };

    console.log(medicos_opts);
    scheduler.config.lightbox.sections=[
      {name:"Paciente",height:20, type:"textarea", map_to:"paciente"},
      {name:"Medico",height:20, type:"select", options:medicos_opts, map_to:"medico"},
      {name:"Equipo",height:20, type:"select", options:equipos_opt, map_to:"equipos"},
      {name:"time",height:20, type: "time", map_to: "auto"},
      {name:"comentarios", height: 60, map_to:"text", type: "textarea", focus:true}
    ];
</script>