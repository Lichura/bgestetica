/*
Product Name: dhtmlxCombo 
Version: 4.6 
Edition: Standard 
License: content of this file is covered by GPL. Usage outside GPL terms is prohibited. To obtain Commercial or Enterprise license contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/
function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}function dhtmlxEvent(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)}function dhtmlXCombo(t,e,n,o){var i=this,s=null,l=null;"object"!=typeof t||t.tagName||(s=t,t=s.parent,n=s.width,e=s.name,o=s.mode,l=s.skin),this.cont="string"==typeof t?document.getElementById(t):t,this.conf={skin:null,form_name:e||"dhxcombo",combo_width:(parseInt(n)||this.cont.offsetWidth||120)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),combo_image:!1,combo_focus:!1,opts_type:"string"==typeof o&&"undefined"!=typeof this.modes[o]?o:"option",opts_count:8,opts_count_min:3,opts_width:null,item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:!0,allow_empty_value:!0,free_text_empty:!1,enabled:!0,btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&"undefined"==typeof window.addEventListener?1:0,ro_mode:!1,ro_text:"",ro_tm:null,ro_tm_time:750,img_path:"",img_def:"",img_def_dis:!0,template:{header:!0,input:"#text#",option:"#text#"},f_func:null,f_mode:!1,f_url:!1,f_cache:!1,f_cache_data:{},f_dyn:!1,f_dyn_end:!1,f_mask:"",f_ac:!0,f_ac_text:"",f_server_tm:null,f_server_last:"",f_loading:!1,s_tm:null,s_time:200,s_mode:"select",last_hover:null,last_selected:null,last_match:null,last_text:"",last_value:"",tm_hover:null,tm_confirm_blur:null,clear_click:!1,clear_blur:!1,clear_bsp:!1,clear_key:!1,sp:{dhx_skyblue:{list_ofs:1,hdr_ofs:1,scr_ofs:1},dhx_web:{list_ofs:0,hdr_ofs:1,scr_ofs:0},dhx_terrace:{list_ofs:1,hdr_ofs:1,scr_ofs:1}},col_w:null},this.conf.combo_image=1==this.modes[this.conf.opts_type].image,this.t={},this.base=document.createElement("DIV"),this.base.style.width=this.conf.combo_width+"px",this.base.innerHTML="<input type='text' class='dhxcombo_input' style='width:"+(this.conf.combo_width-24-(this.conf.combo_image?23:0))+"px;"+(this.conf.combo_image?"margin-left:23px;":"")+"' autocomplete='off'><input type='hidden' value=''><input type='hidden' value='false'><div class='dhxcombo_select_button'><div class='dhxcombo_select_img'></div></div>"+(this.conf.combo_image?"<div class='dhxcombo_top_image'>"+this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)+"</div>":""),this.cont.appendChild(this.base),this.list=document.createElement("DIV"),this.list._listId=window.dhx4.newId(),this.list.style.display="none",document.body.insertBefore(this.list,document.body.firstChild),this._doOnListScroll=function(){null!=i.conf.s_tm&&window.clearTimeout(i.conf.s_tm),i.conf.s_tm=window.setTimeout(i._doOnListScrollAction,i.conf.s_time)},this._doOnListScrollAction=function(){i.conf.s_tm=null,"scroll"==i.conf.s_mode&&i.list.scrollHeight-i.list.scrollTop-10<i.list.clientHeight&&i._subloadRequest()},"function"==typeof window.addEventListener?this.list.addEventListener("scroll",this._doOnListScroll,!1):this.list.attachEvent("onscroll",this._doOnListScroll),this.setSkin(l||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcombo")||"dhx_skyblue"),this._updateTopImage=function(t){this.conf.combo_image&&(null!=t?this.base.lastChild.innerHTML=this.t[t].obj.getTopImage(this.t[t].item,this.conf.enabled):this.base.lastChild.innerHTML=this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled))},this._filterOpts=function(t){this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm);var e=String(this.base.firstChild.value).replace(new RegExp(this.conf.f_ac_text+"$","i"),"");if(this.conf.f_server_last==e.toLowerCase())return void this._checkForMatch();if(null!=this.conf.f_url&&this.checkEvent("onDynXLS"))return this.conf.f_server_last=e.toLowerCase(),void this.callEvent("onDynXLS",[e]);if(null!=this.conf.f_url){if(0==e.length)return this.conf.f_server_last=e.toLowerCase(),void this.clearAll();if(1==this.conf.f_cache&&null!=this.conf.f_cache_data[e]){this.clearAll(),this.conf.f_server_last=e.toLowerCase();for(var n=0;n<this.conf.f_cache_data[e].data.length;n++)this.load(this.conf.f_cache_data[e].data[n]);this.conf.f_dyn&&(this.conf.f_dyn_end=this.conf.f_cache_data[e].dyn_end,this.conf.f_mask=this.conf.f_cache_data[e].mask),t!==!0&&(this._showList(!0),this._checkForMatch())}else this.conf.f_server_tm=window.setTimeout(function(){i.conf.f_server_last=e.toLowerCase(),i.conf.f_mask=e;var n="mask="+encodeURIComponent(e);i.conf.f_dyn&&(n+="&pos=0",i.conf.f_dyn_end=!1);var o=function(n){i.conf.f_cache&&(i.conf.f_cache_data[e]||(i.conf.f_cache_data[e]={data:[],dyn_end:!1,mask:e}),i.conf.f_cache_data[e].data.push(n.xmlDoc.responseXML)),i.clearAll(),i.load(n.xmlDoc.responseXML);var s=i.base.offsetWidth>0&&i.base.offsetHeight>0;if(1==s&&1==i.conf.enabled&&1==i.conf.combo_focus&&t!==!0){if(i.conf.f_ac&&"start"==i.conf.f_mode&&0==i.conf.clear_bsp&&null!=i.list.firstChild){var l=i.list.firstChild._optId,d=String(i.t[l].obj.getText(i.list.firstChild,!0));e==i.base.firstChild.value&&0===String(d).toLowerCase().indexOf(String(e).toLowerCase())&&(i.base.firstChild.value=d,i.conf.f_ac_text=d.substr(e.length),i._selectRange(e.length,d.length))}i._showList(!0),i._checkForMatch()}o=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(i.conf.f_url,n,o):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(i.conf.f_url+(String(i.conf.f_url).indexOf("?")>=0?"&":"?")+n,o)},200)}else{this.conf.f_server_last=e.toLowerCase();var o=0==e.length?!0:new RegExp(("start"==this.conf.f_mode?"^":"")+String(e).replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/gi,"\\$&"),"i"),s=null;for(var l in this.t){var d=!1;if(o!==!0)if(null!=this.conf.f_func){var a=this._getOption(this.t[l].item._optId,n);d=1==this.conf.f_func.apply(window,[e,a])}else{var r=this.t[l].obj.getText(this.t[l].item,!0);d=1==o.test(r)}o===!0||1==d?(this.t[l].item.style.display="",null==s&&e.length>0&&(s=String(this.t[l].obj.getText(this.t[l].item,!0)))):this.t[l].item.style.display="none"}this.conf.f_ac&&"start"==this.conf.f_mode&&0==this.conf.clear_bsp&&null!=s&&(this.conf.f_ac_text=s.replace(new RegExp("^"+e,"i"),""),this.base.firstChild.value=s,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)),"between"==this.conf.f_mode&&1==this.conf.clear_bsp&&this._checkForMatch(!0),t!==!0&&(this._showList(!0),this._checkForMatch())}},this._searchRO=function(t){this.conf.ro_tm&&window.clearTimeout(this.conf.ro_tm),this.conf.ro_text+=t,this._showList();for(var e=0;e<this.list.childNodes.length;e++){var n=this.list.childNodes[e]._optId,o=String(this.t[n].obj.getText(this.list.childNodes[e],!0)).toLowerCase();if(0===o.indexOf(this.conf.ro_text)){this._setSelected(n,!0,!0),this._confirmSelect("script",!1);break}}this.conf.ro_tm=window.setTimeout(function(){i.conf.ro_text=""},this.conf.ro_tm_time)},this._initObj=function(t){"undefined"!=typeof t.template&&this.setTemplate(t.template),1!=t.add&&1!=this.conf.f_loading&&this.clearAll(!1),this.addOption(t.options)},this._xmlToObj=function(t,e,n){var o={add:!1,options:[]},i=1==e?t:t.getElementsByTagName("complete");if(i.length>0){1==window.dhx4.s2b(i[0].getAttribute("add"))&&(o.add=!0);for(var s=i[0].childNodes,l=0;l<s.length;l++)if("undefined"!=typeof s[l].tagName){if("template"==String(s[l].tagName).toLowerCase()){for(var d={},a=0;a<s[l].childNodes.length;a++){var r=s[l].childNodes[a];if(null!=r.tagName){var h=r.tagName;if("undefined"!=typeof this.conf.template[h]&&(d[h]=window.dhx4._xmlNodeValue(r)),"columns"==h)for(var c=0;c<r.childNodes.length;c++){var f=r.childNodes[c];if(null!=f.tagName&&"column"==f.tagName){var u={};for(var m in{width:1,css:1,header:1,option:1})null!=f.getAttribute(m)&&(u[m]=f.getAttribute(m));for(var m in{header:1,option:1}){var p=f.getElementsByTagName(m);null!=p[0]&&null!=p[0].firstChild&&(u[m]=window.dhx4._xmlNodeValue(p[0]))}null==d.columns&&(d.columns=[]),d.columns.push(u)}f=null}}r=null}this.setTemplate(d)}if("option"==String(s[l].tagName).toLowerCase()){var _=!1;_=1==e?o.options.length==n:window.dhx4.s2b(s[l].getAttribute("selected"));var g={value:s[l].getAttribute("value"),text:window.dhx4._xmlNodeValue(s[l]),selected:_,checked:window.dhx4.s2b(s[l].getAttribute("checked"))};for(var m in{img:1,img_dis:1,img_src:1,img_src_dis:1,css:1})null!=s[l].getAttribute(m)&&(g[m]=s[l].getAttribute(m));for(var a=0;a<s[l].childNodes.length;a++)if(null!=s[l].childNodes[a].tagName&&"text"==String(s[l].childNodes[a].tagName).toLowerCase()){g.text={};for(var r=s[l].childNodes[a],c=0;c<r.childNodes.length;c++)null!=r.childNodes[c].tagName&&(g.text[r.childNodes[c].tagName]=window.dhx4._xmlNodeValue(r.childNodes[c]))}o.options.push(g)}}i=s=null}return o},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","complete",{data:!0}),window.dhx4._eventable(this),this._getNearItem=function(t,e){for(var n=null;null!=t;)t=t[0>e?"previousSibling":"nextSibling"],null==n&&null!=t&&""==t.style.display&&null!=t._optId&&(n=t,t=null);return n},this.setName(this.conf.form_name),this._doOnListMouseMove=function(t){t=t||event;for(var e=t.target||t.srcElement;null!=e&&e!=this;)"undefined"!=typeof e._optId&&(i.conf.tm_hover&&window.clearTimeout(i.conf.tm_hover),i._setSelected(e._optId,!1,!1,!0)),e=e.parentNode;e=null},this._doOnListMouseDown=function(t){t=t||event,t.cancelBubble=!0,i.conf.clear_click=!0,window.setTimeout(function(){i.base.firstChild.focus()},1)},this._doOnListMouseUp=function(t){if(t=t||event,t.button==i.conf.btn_left){for(var e=t.target||t.srcElement;null!=e&&e!=this;){if("undefined"!=typeof e._optId){var n=!0;"function"==typeof i.t[e._optId].obj.optionClick&&i.t[e._optId].obj.optionClick(e,t,i)!==!0&&(n=!1),n&&(i._setSelected(e._optId,null,!0),i._confirmSelect("click"))}e=e.parentNode}e=null}},this._doOnListMouseOut=function(){i.conf.tm_hover&&window.clearTimeout(i.conf.tm_hover),i.conf.tm_hover=window.setTimeout(function(){var t=i.conf.last_match||i.conf.last_selected;null==i.conf.last_match&&null!=i.t[t]&&i.base.firstChild.value!=i.t[t].obj.getText(i.t[t].item,!0)&&(t=null),i._setSelected(t,null,!0,!0)},1)},this._doOnBaseMouseDown=function(t){if(i.conf.enabled&&(i.conf.clear_click=!0,t=t||event,t.button==i.conf.btn_left)){var e=t.target||t.srcElement;if(e!=this.firstChild){window.setTimeout(function(){i.base.firstChild.focus()},1);for(var n=e;n!=this&&null!=n;)if(n==this.lastChild){if("function"==typeof i.modes[i.conf.opts_type].topImageClick){var o=i.conf.last_hover||i.conf.last_selected,s=null!=o?i.t[o].item:null;if(i.modes[i.conf.opts_type].topImageClick(s,i)!==!0)return void(o=s=null)}n=null}else n=n.parentNode}i._isListVisible()?i._hideList():(e!=this.firstChild&&(i.conf.clear_blur=!0),i._showList(),i._setSelected(i.conf.last_selected,!0,!0)),e=null}},this._doOnBodyMouseDown=function(){return i.conf.clear_click?void(i.conf.clear_click=!1):void i._confirmSelect("blur")},this._doOnInputFocus=function(){i.conf.clear_blur=!1,i.conf.tm_confirm_blur&&window.clearTimeout(i.conf.tm_confirm_blur),0==i.conf.combo_focus&&(i.conf.combo_focus=!0,i.callEvent("onFocus",[]))},this._doOnInputBlur=function(){return 1==i.conf.clear_blur?void(i.conf.clear_blur=!1):(i.conf.tm_confirm_blur&&window.clearTimeout(i.conf.tm_confirm_blur),void(i.conf.tm_confirm_blur=window.setTimeout(function(){0==i.conf.clear_click&&(i._confirmSelect("blur"),i.conf.combo_focus=!1,i.callEvent("onBlur",[]))},20)))},this._doOnInputKeyUp=function(t){return t=t||event,0!=i.conf.f_mode?(i.conf.clear_bsp=8==t.keyCode||46==t.keyCode,void i._filterOpts()):void i._checkForMatch()},this._doOnInputKeyDown=function(t){t=t||event,38!=t.keyCode&&40!=t.keyCode||t.ctrlKey||t.shiftKey||t.altKey||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,i._keyOnUpDown(38==t.keyCode?-1:1)),113==t.keyCode&&(i._isListVisible()||(i._showList(),i.base.firstChild.value==i.conf.last_text?(i._setSelected(i.conf.last_selected,!0,!0),i.base.firstChild.value=i.conf.last_text,i.conf.f_server_last=i.base.firstChild.value.toLowerCase()):(i.conf.f_server_last=i.base.firstChild.value.toLowerCase(),0==i.conf.f_mode&&i._checkForMatch()))),27==t.keyCode&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,i._cancelSelect()),13==t.keyCode&&(t.preventDefault&&t.preventDefault(),i._confirmSelect("kbd")),1==i.conf.ro_mode&&(t.keyCode>=48&&t.keyCode<=57||t.keyCode>=65&&t.keyCode<=90)&&(i._searchRO(String.fromCharCode(t.keyCode).toLowerCase()),t.cancelBubble=!0),i.conf.clear_key=!0,i.callEvent("onKeyPressed",[t.keyCode||t.charCode])},this._doOnInputKeyPress=function(t){return i.conf.clear_key?void(i.conf.clear_key=!1):(t=t||event,void i.callEvent("onKeyPressed",[t.keyCode||t.charCode]))},this._keyOnUpDown=function(t){var e=null;if(this.conf.last_hover?e=this.t[this.conf.last_hover].item:this.conf.last_selected&&(e=this.t[this.conf.last_selected].item),(e||0!=this._getListVisibleCount())&&(null!=e&&""!=e.style.display&&(e=null),this._showList(),null!=e?this.t[e._optId].obj.isSelected(e)&&(e=this._getNearItem(e,t)):(e=this.list.firstChild,""!=e.style.display&&(e=this._getNearItem(e,1))),null!=e)){if(this._setSelected(e._optId,!0,!0),0==this.conf.f_mode)this.base.firstChild.value=this.t[e._optId].obj.getText(e,!0);else{var n=String(this.t[e._optId].obj.getText(e,!0));"start"==this.conf.f_mode&&1==this.conf.f_ac?0===n.toLowerCase().indexOf(this.conf.f_server_last)?(this.conf.f_ac_text=n.substring(this.conf.f_server_last.length,n.length),this.base.firstChild.value=n,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)):(this.base.firstChild.value=n,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this._selectRange(0,this.base.firstChild.value.length)):(this.base.firstChild.value=n,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())}e=null}},this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.base,evs:{mousedown:"_doOnBaseMouseDown"}},{node:this.base.firstChild,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}},{node:this.list,evs:{mousemove:"_doOnListMouseMove",mousedown:"_doOnListMouseDown",mouseup:"_doOnListMouseUp",mouseout:"_doOnListMouseOut"}}];for(var d=0;d<this.conf.evs_nodes.length;d++)for(var a in this.conf.evs_nodes[d].evs)"function"==typeof window.addEventListener?this.conf.evs_nodes[d].node.addEventListener(a,this[this.conf.evs_nodes[d].evs[a]],!1):this.conf.evs_nodes[d].node.attachEvent("on"+a,this[this.conf.evs_nodes[d].evs[a]]);return this.unload=function(){this.clearAll(),this.t=null;for(var t=0;t<this.conf.evs_nodes.length;t++){for(var e in this.conf.evs_nodes[t].evs)"function"==typeof window.addEventListener?this.conf.evs_nodes[t].node.removeEventListener(e,this[this.conf.evs_nodes[t].evs[e]],!1):this.conf.evs_nodes[t].node.detachEvent("on"+e,this[this.conf.evs_nodes[t].evs[e]]),this.conf.evs_nodes[t].evs[e]=null,delete this.conf.evs_nodes[t].evs[e];this.conf.evs_nodes[t].node=null,this.conf.evs_nodes[t].evs=null,delete this.conf.evs_nodes[t].node,delete this.conf.evs_nodes[t].evs,this.conf.evs_nodes[t]=null}window.dhx4._eventable(this,"clear"),window.dhx4._enableDataLoading(this,null,null,null,"clear"),this._mcDetachHeader(),this.DOMelem_input=this.DOMelem_button=this.DOMlist=this.DOMelem=this.DOMParent=null;for(var e in this.conf)this.conf[e]=null,delete this.conf[e];this.conf=null,"function"==typeof window.addEventListener?this.list.removeEventListener("scroll",this._doOnListScroll,!1):this.list.detachEvent("onscroll",this._doOnListScroll),this.base.parentNode.removeChild(this.base),this.list.parentNode.removeChild(this.list),this.base=this.list=this.cont=null,this.modes=null;for(var e in this)"function"==typeof this[e]&&(this[e]=null);i=null},this.DOMelem_input=this.base.firstChild,this.DOMelem_button=this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)],this.DOMlist=this.list,this.DOMelem=this.base,this.DOMParent=t,t=null,null!=s&&(null!=s.filter&&("string"==typeof s.filter?this.enableFilteringMode(!0,s.filter,window.dhx4.s2b(s.filter_cache),window.dhx4.s2b(s.filter_sub_load)):this.enableFilteringMode(!0)),null!=s.image_path&&this.setImagePath(s.image_path),null==s.default_image&&null==s.default_image_dis||this.setDefaultImage(s.default_image,s.default_image_dis),(s.items||s.options)&&this.addOption(s.items||s.options),(s.xml||s.json)&&this.load(s.xml||s.json),"undefined"!=typeof s.readonly&&this.readonly(s.readonly),s=null),this}function dhtmlXComboFromSelect(t){"string"==typeof t&&(t=document.getElementById(t));var e=t.offsetWidth,n=t.getAttribute("name")||null,o=document.createElement("SPAN");t.parentNode.insertBefore(o,t);var i=t.getAttribute("mode")||t.getAttribute("opt_type")||"option",s=new dhtmlXCombo(o,n,e,i);o=null;var l=t.getAttribute("imagePath");l&&s.setImagePath(l);var d=t.getAttribute("defaultImage"),a=t.getAttribute("defaultImageDis");1==window.dhx4.s2b(a)&&(a=!0),null==d&&null==a||s.setDefaultImage(d,a);var r=s._xmlToObj([t],!0,t.selectedIndex);return r.options.length>0&&s.addOption(r.options),r=null,t.parentNode.removeChild(t),t=null,s}function dhtmlXComboExtend(t,e){for(var n in dhtmlXCombo.prototype.modes[e])"undefined"==typeof dhtmlXCombo.prototype.modes[t][n]&&(dhtmlXCombo.prototype.modes[t][n]=dhtmlXCombo.prototype.modes[e][n])}"undefined"==typeof window.dhx4&&(window.dhx4={version:"4.6",skin:null,skinDetect:function(t){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[this.readFromCss(t+"_skin_detect")]||null},readFromCss:function(t,e){var n=document.createElement("DIV");n.className=t,null!=document.body.firstChild?document.body.insertBefore(n,document.body.firstChild):document.body.appendChild(n);var o=n[e||"offsetWidth"];return n.parentNode.removeChild(n),n=null,o},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var t=this.first();for(var e in this.data)t=Math.max(t,this.data[e]);return t},reserve:function(t){return this.data[t]=this.last()+this.step,this.data[t]},clear:function(t){null!=this.data[t]&&(this.data[t]=null,delete this.data[t])}},s2b:function(t){return"string"==typeof t&&(t=t.toLowerCase()),1==t||1==t||"true"==t||"1"==t||"yes"==t||"y"==t||"on"==t},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(e){dhx4.temp=null}return obj=dhx4.temp,dhx4.temp=null,obj},absLeft:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.getOffset(t).left},absTop:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.getOffset(t).top},_aOfs:function(t){for(var e=0,n=0;t;)e+=parseInt(t.offsetTop),n+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:n}},_aOfsRect:function(t){var e=t.getBoundingClientRect(),n=document.body,o=document.documentElement,i=window.pageYOffset||o.scrollTop||n.scrollTop,s=window.pageXOffset||o.scrollLeft||n.scrollLeft,l=o.clientTop||n.clientTop||0,d=o.clientLeft||n.clientLeft||0,a=e.top+i-l,r=e.left+s-d;return{top:Math.round(a),left:Math.round(r)}},getOffset:function(t){return t.getBoundingClientRect?this._aOfsRect(t):this._aOfs(t)},_isObj:function(t){return null!=t&&"object"==typeof t&&"undefined"==typeof t.length},_copyObj:function(t){if(this._isObj(t)){var e={};for(var n in t)"object"==typeof t[n]&&null!=t[n]?e[n]=this._copyObj(t[n]):e[n]=t[n]}else for(var e=[],n=0;n<t.length;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=this._copyObj(t[n]):e[n]=t[n];return e},screenDim:function(){var t=navigator.userAgent.indexOf("MSIE")>=0,e={};return e.left=document.body.scrollLeft,e.right=e.left+(window.innerWidth||document.body.clientWidth),e.top=Math.max((t?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),e.bottom=e.top+(t?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight),e},selectTextRange:function(t,e,n){t="string"==typeof t?document.getElementById(t):t;var o=t.value.length;if(e=Math.max(Math.min(e,o),0),n=Math.min(n,o),t.setSelectionRange)try{t.setSelectionRange(e,n)}catch(i){}else if(t.createTextRange){var s=t.createTextRange();s.moveStart("character",e),s.moveEnd("character",n-o);try{s.select()}catch(i){}}},transData:null,transDetect:function(){if(null==this.transData){this.transData={transProp:!1,transEv:null};var t={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var e in t)0==this.transData.transProp&&null!=document.documentElement.style[e]&&(this.transData.transProp=e,this.transData.transEv=t[e]);t=null}return this.transData},_xmlNodeValue:function(t){for(var e="",n=0;n<t.childNodes.length;n++)e+=null!=t.childNodes[n].nodeValue?t.childNodes[n].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"";return e}},window.dhx4.isIE=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE6=null==window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,window.dhx4.isIE7=navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,window.dhx4.isIE8=navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE9=navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE10=navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&1!=window.navigator.pointerEnabled,window.dhx4.isIE11=navigator.userAgent.indexOf("Trident")>=0&&1==window.navigator.pointerEnabled,window.dhx4.isEdge=navigator.userAgent.indexOf("Edge")>=0,window.dhx4.isOpera=navigator.userAgent.indexOf("Opera")>=0,window.dhx4.isChrome=navigator.userAgent.indexOf("Chrome")>=0&&!window.dhx4.isEdge,window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge,window.dhx4.isFF=navigator.userAgent.indexOf("Firefox")>=0,window.dhx4.isIPad=navigator.userAgent.search(/iPad/gi)>=0,window.dhx4.dnd={evs:{},p_en:(window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled),_mTouch:function(t){return window.dhx4.isIE10&&t.pointerType==t.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&"mouse"==t.pointerType||window.dhx4.isEdge&&"mouse"==t.pointerType},_touchOn:function(t){null==t&&(t=document.body),t.style.touchAction=t.style.msTouchAction="",t=null},_touchOff:function(t){null==t&&(t=document.body),t.style.touchAction=t.style.msTouchAction="none",t=null}},1==window.navigator.pointerEnabled?window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}:1==window.navigator.msPointerEnabled?window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:"undefined"!=typeof window.addEventListener&&(window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"})),"undefined"==typeof window.dhx4.template&&(window.dhx4.trim=function(t){return String(t).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},window.dhx4.template=function(t,e,n){return t.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var t=arguments[1],o=window.dhx4.trim(arguments[3]),i=null,s=[e[t]];if(o.length>0){o=o.split(":");for(var l=[],d=0;d<o.length;d++)d>0&&null!=l[l.length-1].match(/\\$/)?l[l.length-1]=l[l.length-1].replace(/\\$/,"")+":"+o[d]:l.push(o[d]);i=l[0];for(var d=1;d<l.length;d++)s.push(l[d])}return"string"==typeof i&&"function"==typeof window.dhx4.template[i]?window.dhx4.template[i].apply(window.dhx4.template,s):t.length>0&&"undefined"!=typeof e[t]?1==n?window.dhx4.trim(e[t]):String(e[t]):""})},window.dhx4.template.date=function(t,e){return null!=t?t instanceof Date?window.dhx4.date2str(t,e):(t=t.toString(),null!=t.match(/^\d*$/)?window.dhx4.date2str(new Date(parseInt(t)),e):t):""},window.dhx4.template.maxlength=function(t,e){return String(t).substr(0,e)},window.dhx4.template.number_format=function(t,e,n,o){var i=window.dhx4.template._parseFmt(e,n,o);return 0==i?t:window.dhx4.template._getFmtValue(t,i)},window.dhx4.template.lowercase=function(t){return"undefined"!=typeof t&&null!=t||(t=""),String(t).toLowerCase()},window.dhx4.template.uppercase=function(t){return"undefined"!=typeof t&&null!=t||(t=""),String(t).toUpperCase()},window.dhx4.template._parseFmt=function(t,e,n){var o=t.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(null==o||4!=o.length)return!1;var i={i_len:!1,i_sep:"string"==typeof e?e:",",d_len:!1,d_sep:"string"==typeof n?n:".",s_bef:"string"==typeof o[1]?o[1]:"",s_aft:"string"==typeof o[3]?o[3]:""},s=o[2].split(".");null!=s[1]&&(i.d_len=s[1].length);var l=s[0].split(",");return l.length>1&&(i.i_len=l[l.length-1].length),i},window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(null!=r&&5==r.length){var v0="";if(null!=r[1]&&(v0+=r[1]),v0+=fmt.s_bef,fmt.i_len!==!1){for(var i=0,v1="",q=r[2].length-1;q>=0;q--)v1=""+r[2].charAt(q)+v1,++i==fmt.i_len&&q>0&&(v1=fmt.i_sep+v1,i=0);v0+=v1}else v0+=r[2];if(fmt.d_len!==!1){for(null==r[4]&&(r[4]="");r[4].length<fmt.d_len;)r[4]+="0";eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=r[4].match(dhx4.temp);null!=t1&&(v0+=fmt.d_sep+t1),dhx4.temp=t1=null}return v0+=fmt.s_aft}return value}),"undefined"==typeof window.dhx4.dateLang&&(window.dhx4.dateLang="en",window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}},window.dhx4.dateFormat={en:"%Y-%m-%d"},window.dhx4.date2str=function(t,e,n){if(null!=e&&"undefined"!=typeof e||(e=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=n&&"undefined"!=typeof n||(n=window.dhx4.dateStrings[window.dhx4.dateLang]),t instanceof Date)var o=function(t){return 1==String(t).length?"0"+String(t):t},i=function(e){switch(e){case"%d":return o(t.getDate());case"%j":return t.getDate();case"%D":return n.dayShortName[t.getDay()];case"%l":return n.dayFullName[t.getDay()];case"%m":return o(t.getMonth()+1);case"%n":return t.getMonth()+1;case"%M":return n.monthShortName[t.getMonth()];case"%F":return n.monthFullName[t.getMonth()];case"%y":return o(t.getYear()%100);case"%Y":return t.getFullYear();case"%g":return(t.getHours()+11)%12+1;case"%h":return o((t.getHours()+11)%12+1);case"%G":return t.getHours();case"%H":return o(t.getHours());case"%i":return o(t.getMinutes());case"%s":return o(t.getSeconds());case"%a":return t.getHours()>11?"pm":"am";case"%A":return t.getHours()>11?"PM":"AM";case"%%":return"%";case"%u":return t.getMilliseconds();case"%P":if(null!=window.dhx4.temp_calendar&&null!=window.dhx4.temp_calendar.tz)return window.dhx4.temp_calendar.tz;var i=t.getTimezoneOffset(),s=Math.abs(Math.floor(i/60)),l=Math.abs(i)-60*s;return(i>0?"-":"+")+o(s)+":"+o(l);default:return e}},s=String(e||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,i);return s||String(t)},window.dhx4.str2date=function(t,e,n){null!=e&&"undefined"!=typeof e||(e=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=n&&"undefined"!=typeof n||(n=window.dhx4.dateStrings[window.dhx4.dateLang]),e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var o=[],i=[];e=e.replace(/%[a-z]/gi,function(t){switch(t){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":return i.push(t),"(\\d{2})";case"%D":case"%l":case"%M":case"%F":return i.push(t),"([a-z\xe9\xfb\xe4\u0430-\u044f\u0451]{1,})";case"%j":case"%n":case"%g":case"%G":return i.push(t),"(\\d{1,2})";case"%Y":return i.push(t),"(\\d{4})";case"%a":return i.push(t),"([a|p]m)";case"%A":return i.push(t),"([A|P]M)";case"%u":return i.push(t),"(\\d{1,6})";case"%P":return i.push(t),"([+-]\\d{1,2}:\\d{1,2})"}return t});var s=new RegExp(e,"i"),l=t.match(s);if(null==l||l.length-1!=i.length)return"Invalid Date";for(var d=1;d<l.length;d++)o.push(l[d]);for(var a={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7},r={},h={},d=0;d<i.length;d++)if("undefined"!=typeof a[i[d]]){var c=a[i[d]];r[c]||(r[c]=[],h[c]=[]),r[c].push(o[d]),h[c].push(i[d])}o=[],i=[];for(var d=1;7>=d;d++)if(null!=r[d])for(var f=0;f<r[d].length;f++)o.push(r[d][f]),i.push(h[d][f]);var u=new Date;u.setDate(1),u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0);for(var m=function(t,e){for(var n=0;n<e.length;n++)if(e[n].toLowerCase()==t)return n;return-1},d=0;d<o.length;d++)switch(i[d]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":isNaN(o[d])||u[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[i[d]]](Number(o[d])+("%m"==i[d]||"%n"==i[d]?-1:0));break;case"%M":case"%F":var p=m(o[d].toLowerCase(),n[{"%M":"monthShortName","%F":"monthFullName"}[i[d]]]);p>=0&&u.setMonth(p);break;case"%y":if(!isNaN(o[d])){var _=Number(o[d]);u.setFullYear(_+(_>50?1900:2e3))}break;case"%g":case"%h":if(!isNaN(o[d])){var _=Number(o[d]);12>=_&&_>=0&&u.setHours(_+(m("pm",o)>=0?12==_?0:12:12==_?-12:0))}break;case"%P":null!=window.dhx4.temp_calendar&&(window.dhx4.temp_calendar.tz=o[d])}return u}),"undefined"==typeof window.dhx4.ajax&&(window.dhx4.ajax={cache:!1,method:"get",parse:function(t){if("string"!=typeof t)return t;if(t=t.replace(/^[\s]+/,""),window.DOMParser&&!dhx4.isIE)var e=(new window.DOMParser).parseFromString(t,"text/xml");else if(window.ActiveXObject!==window.undefined){var e=new window.ActiveXObject("Microsoft.XMLDOM");e.async="false",e.loadXML(t)}return e},xmltop:function(t,e,n){if(("undefined"==typeof e.status||e.status<400)&&(xml=e.responseXML?e.responseXML||e:dhx4.ajax.parse(e.responseText||e),xml&&null!==xml.documentElement))try{if(!xml.getElementsByTagName("parsererror").length)return xml.getElementsByTagName(t)[0]}catch(o){}return-1!==n&&dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],n]),document.createElement("DIV")},xpath:function(t,e){if(e.nodeName||(e=e.responseXML||e),!dhx4.isIE){for(var n,o=[],i=(e.ownerDocument||e).evaluate(t,e,null,XPathResult.ANY_TYPE,null);n=i.iterateNext();)o.push(n);return o}try{return e.selectNodes(t)||[]}catch(s){return[]}},query:function(t){dhx4.ajax._call(t.method||"GET",t.url,t.data||"",t.async||!0,t.callback,null,t.headers)},get:function(t,e){return this._call("GET",t,null,!0,e)},getSync:function(t){return this._call("GET",t,null,!1)},put:function(t,e,n){return this._call("PUT",t,e,!0,n)},del:function(t,e,n){return this._call("DELETE",t,e,!0,n)},post:function(t,e,n){return 1==arguments.length?e="":2!=arguments.length||"function"!=typeof e&&"function"!=typeof window[e]?e=String(e):(n=e,e=""),this._call("POST",t,e,!0,n)},postSync:function(t,e){return e=null==e?"":String(e),this._call("POST",t,e,!1)},getLong:function(t,e){this._call("GET",t,null,!0,e,{url:t})},postLong:function(t,e,n){2==arguments.length&&(n=e,e=""),this._call("POST",t,e,!0,n,{url:t,postData:e})},_call:function(t,e,n,o,i,s,l){var d=window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a=null!=navigator.userAgent.match(/AppleWebKit/)&&null!=navigator.userAgent.match(/Qt/)&&null!=navigator.userAgent.match(/Safari/);if(1==o&&(d.onreadystatechange=function(){if(4==d.readyState||1==a&&3==d.readyState){if((200!=d.status||""==d.responseText)&&!dhx4.callEvent("onAjaxError",[{xmlDoc:d,filePath:e,async:o}]))return;window.setTimeout(function(){"function"==typeof i&&i.apply(window,[{xmlDoc:d,filePath:e,async:o}]),null!=s&&("undefined"!=typeof s.postData?dhx4.ajax.postLong(s.url,s.postData,i):dhx4.ajax.getLong(s.url,i)),i=null,d=null},1)}}),"GET"==t&&(e+=this._dhxr(e)),d.open(t,e,o),null!=l)for(var r in l)d.setRequestHeader(r,l[r]);else"POST"==t||"PUT"==t||"DELETE"==t?d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==t&&(n=null);return d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.send(n),1!=o&&(4==d.readyState||1==a&&3==d.readyState)&&(200==d.status&&""!=d.responseText||dhx4.callEvent("onAjaxError",[{xmlDoc:d,filePath:e,async:o}])),{xmlDoc:d,filePath:e,async:o}},_dhxr:function(t,e){return 1!=this.cache?(null==t.match(/^[\?\&]$/)&&(t=t.indexOf("?")>=0?"&":"?"),"undefined"==typeof e&&(e=!0),t+"dhxr"+(new Date).getTime()+(1==e?"=1":"")):""}}),"undefined"==typeof window.dhx4._enableDataLoading&&(window.dhx4._enableDataLoading=function(t,e,n,o,i){if("clear"==i){for(var s in t._dhxdataload)t._dhxdataload[s]=null,delete t._dhxdataload[s];
return t._loadData=null,t._dhxdataload=null,t.load=null,t.loadStruct=null,void(t=null)}if(t._dhxdataload={initObj:e,xmlToJson:n,xmlRootTag:o,onBeforeXLS:null},t._loadData=function(t,e,n){2==arguments.length&&(n=e,e=null);var o=null;if(3==arguments.length&&(n=arguments[2]),"string"==typeof t){var i=t.replace(/^\s{1,}/,"").replace(/\s{1,}$/,""),s=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(s.test(i.replace(/^<\?xml[^\?]*\?>\s*/,""))&&(o=dhx4.ajax.parse(t),null!=o&&(o=this[this._dhxdataload.xmlToJson].apply(this,[o]))),null!=o||null==i.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)&&null==i.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)||(o=dhx4.s2j(i)),null==o){this.callEvent("onXLS",[]);var l=[];if("function"==typeof this._dhxdataload.onBeforeXLS){var i=this._dhxdataload.onBeforeXLS.apply(this,[t]);if(null!=i&&"object"==typeof i&&(null!=i.url&&(t=i.url),null!=i.params))for(var d in i.params)l.push(d+"="+encodeURIComponent(i.params[d]))}var a=this,r=function(e){var o=null;o=(e.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||null!=e.xmlDoc.responseText.replace(/^\s{1,}/,"").match(/^</)?a[a._dhxdataload.xmlToJson].apply(a,[e.xmlDoc.responseXML]):dhx4.s2j(e.xmlDoc.responseText),null!=o&&a[a._dhxdataload.initObj].apply(a,[o,t]),a.callEvent("onXLE",[]),null!=n&&("function"==typeof n?n.apply(a,[]):"function"==typeof window[n]&&window[n].apply(a,[])),r=n=null,o=e=a=null};return l=l.join("&")+("string"==typeof e?"&"+e:""),void("post"==dhx4.ajax.method?dhx4.ajax.post(t,l,r):"get"==dhx4.ajax.method&&dhx4.ajax.get(t+(l.length>0?(t.indexOf("?")>0?"&":"?")+l:""),r))}}else o="object"==typeof t.documentElement||"undefined"!=typeof t.tagName&&"undefined"!=typeof t.getElementsByTagName&&t.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0?this[this._dhxdataload.xmlToJson].apply(this,[t]):window.dhx4._copyObj(t);null!=o&&this[this._dhxdataload.initObj].apply(this,[o]),null!=n&&("function"==typeof n?n.apply(this,[]):"function"==typeof window[n]&&window[n].apply(this,[]),n=null)},null!=i){var l={struct:"loadStruct",data:"load"};for(var s in i)1==i[s]&&(t[l[s]]=function(){return this._loadData.apply(this,arguments)})}t=null}),"undefined"==typeof window.dhx4._eventable&&(window.dhx4._eventable=function(t,e){return"clear"==e?(t.detachAllEvents(),t.dhxevs=null,t.attachEvent=null,t.detachEvent=null,t.checkEvent=null,t.callEvent=null,t.detachAllEvents=null,void(t=null)):(t.dhxevs={data:{}},t.attachEvent=function(t,e){t=String(t).toLowerCase(),this.dhxevs.data[t]||(this.dhxevs.data[t]={});var n=window.dhx4.newId();return this.dhxevs.data[t][n]=e,n},t.detachEvent=function(t){for(var e in this.dhxevs.data){var n=0;for(var o in this.dhxevs.data[e])o==t?(this.dhxevs.data[e][o]=null,delete this.dhxevs.data[e][o]):n++;0==n&&(this.dhxevs.data[e]=null,delete this.dhxevs.data[e])}},t.checkEvent=function(t){return t=String(t).toLowerCase(),null!=this.dhxevs.data[t]},t.callEvent=function(t,e){if(t=String(t).toLowerCase(),null==this.dhxevs.data[t])return!0;var n=!0;for(var o in this.dhxevs.data[t])n=this.dhxevs.data[t][o].apply(this,e)&&n;return n},t.detachAllEvents=function(){for(var t in this.dhxevs.data){for(var e in this.dhxevs.data[t])this.dhxevs.data[t][e]=null,delete this.dhxevs.data[t][e];this.dhxevs.data[t]=null,delete this.dhxevs.data[t]}},void(t=null))},dhx4._eventable(dhx4)),window.dhtmlxValidation||(dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(t){return""==t},isNotEmpty:function(t){return t instanceof Array?t.length>0:""==!t},isValidBoolean:function(t){return!!t.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(t){return!!t.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(t){return!!t.toString().match(/(^-?\d+$)/)},isValidNumeric:function(t){return!!t.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(t){return!!t.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31&&e[4]<=59&&e[5]<=59&&e[6]<=59)||!1},isValidDate:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31)||!1},isValidTime:function(t){var e=t.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return e&&!!(e[1]<=24&&e[2]<=59&&e[3]<=59)||!1},isValidIPv4:function(t){var e=t.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return e&&!!(e[1]<=255&&e[2]<=255&&e[3]<=255&&e[4]<=255)||!1},isValidCurrency:function(t){return t.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&!0||!1},isValidSSN:function(t){return t.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1},isValidSIN:function(t){return t.toString().match(/^\d{9}$/)&&!0||!1}},dhtmlxValidation=new dhtmlxValidation),"undefined"==typeof window.dhtmlx&&(window.dhtmlx={extend:function(t,e){for(var n in e)t[n]||(t[n]=e[n]);return t},extend_api:function(t,e,n){var o=window[t];o&&(window[t]=function(t){if(t&&"object"==typeof t&&!t.tagName){var n=o.apply(this,e._init?e._init(t):arguments);for(var i in dhtmlx)e[i]&&this[e[i]](dhtmlx[i]);for(var i in t)e[i]?this[e[i]](t[i]):0===i.indexOf("on")&&this.attachEvent(i,t[i])}else var n=o.apply(this,arguments);return e._patch&&e._patch(this),n||this},window[t].prototype=o.prototype,n&&dhtmlx.extend(window[t].prototype,n))},url:function(t){return-1!=t.indexOf("?")?"&":"?"}}),dhtmlDragAndDropObject.prototype.removeDraggableItem=function(t){t.onmousedown=null,t.dragStarter=null,t.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(t,e){t.onmousedown=this.preCreateDragCopy,t.dragStarter=e,this.addDragLanding(t,e)},dhtmlDragAndDropObject.prototype.addDragLanding=function(t,e){t.dragLanding=e},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(t){return!t&&!window.event||2!=(t||event).button?window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(t),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),t&&t.preventDefault?(t.preventDefault(),!1):!1):void 0},dhtmlDragAndDropObject.prototype.callDrag=function(t){if(t||(t=window.event),dragger=window.dhtmlDragAndDrop,!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode){if(!dragger.waitDrag)return dragger.stopDrag(t,!0);if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,t),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1},dragger.gldragNode=dragger.dragNode,document.body.appendChild(dragger.dragNode),document.body.onmouseup=dragger.stopDrag,dragger.waitDrag=0,dragger.dragNode.pWindow=window,dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var e=dragger.gldragNode;dragger.gldragNode.old&&(e=dragger.gldragNode.old),e.parentNode.removeChild(e);var n=dragger.dragNode.pWindow;if(e.pWindow&&e.pWindow.dhtmlDragAndDrop.lastLanding&&e.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(e.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var o=document.createElement("Div");o.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=o.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),n.dhtmlDragAndDrop.dragNode=dragger.dragNode}if(dragger.dragNode.style.left=t.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",dragger.dragNode.style.top=t.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",t.srcElement)i=t.srcElement;else var i=t.target;dragger.checkLanding(i,t)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(t){if(window.name){for(var e=parent.frames[window.name].frameElement.offsetParent,n=0,o=0;e;)n+=e.offsetLeft,o+=e.offsetTop,e=e.offsetParent;if(parent.dhtmlDragAndDrop){var i=parent.dhtmlDragAndDrop.calculateFramePosition(1);n+=1*i.split("_")[0],o+=1*i.split("_")[1]}if(t)return n+"_"+o;this.fx=n,this.fy=o}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(t,e){t&&t.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=t,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,e.clientX,e.clientY,e),this.lastLanding_scr=_isIE?e.srcElement:e.target):t&&"BODY"!=t.tagName?this.checkLanding(t.parentNode,e):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,e.clientX,e.clientY,e),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(t,e){if(dragger=window.dhtmlDragAndDrop,!e){dragger.stopFrameRoute();var n=dragger.lastLanding;dragger.lastLanding=null,n&&n.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,n,_isIE?event.srcElement:t.target)}dragger.lastLanding=null,dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode),dragger.dragNode=0,dragger.gldragNode=0,dragger.fx=0,dragger.fy=0,dragger.dragStartNode=0,dragger.dragStartObject=0,document.body.onmouseup=dragger.tempDOMU,document.body.onmousemove=dragger.tempDOMM,dragger.tempDOMU=null,dragger.tempDOMM=null,dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(t){t&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var e=0;e<window.frames.length;e++)try{window.frames[e]!=t&&window.frames[e].dhtmlDragAndDrop&&window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window)}catch(n){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(n){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(t,e){t&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=t.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=t.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=t.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=t.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&e&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(n){}for(var o=0;o<window.frames.length;o++)try{window.frames[o]!=t&&window.frames[o].dhtmlDragAndDrop&&window.frames[o].dhtmlDragAndDrop.initFrameRoute(window,!t||e?1:0)}catch(n){}},_isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,(-1!=navigator.appVersion.indexOf("MSIE 8.0")||-1!=navigator.appVersion.indexOf("MSIE 9.0")||-1!=navigator.appVersion.indexOf("MSIE 10.0")||document.documentMode>7)&&"BackCompat"!=document.compatMode&&(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),"undefined"==typeof window.dhtmlxEvent,null==dhtmlxEvent.touchDelay&&(dhtmlxEvent.touchDelay=2e3),"undefined"==typeof dhtmlxEvent.initTouch&&(dhtmlxEvent.initTouch=function(){function t(){if(n){var t=document.createEvent("HTMLEvents");t.initEvent("dblclick",!0,!0),n.dispatchEvent(t),e=n=null}}var e,n,o,i;dhtmlxEvent(document.body,"touchstart",function(s){n=s.touches[0].target,o=s.touches[0].clientX,i=s.touches[0].clientY,e=window.setTimeout(t,dhtmlxEvent.touchDelay)}),dhtmlxEvent(document.body,"touchmove",function(t){e&&(Math.abs(t.touches[0].clientX-o)>50||Math.abs(t.touches[0].clientY-i)>50)&&(window.clearTimeout(e),e=n=!1)}),dhtmlxEvent(document.body,"touchend",function(){e&&(window.clearTimeout(e),e=n=!1)}),dhtmlxEvent.initTouch=function(){}}),dhtmlXCombo.prototype.setName=function(t){this.conf.form_name=t,this.base.childNodes[1].name=t,this.base.childNodes[2].name=t.replace(/(\[.*)?$/,"_new_value$1")},dhtmlXCombo.prototype.readonly=function(t){window.dhx4.s2b(t)?(this.base.firstChild.setAttribute("readOnly","true"),this.conf.ro_mode=!0):(this.base.firstChild.removeAttribute("readOnly"),this.conf.ro_mode=!1)},dhtmlXCombo.prototype.setPlaceholder=function(t){"undefined"!=typeof t&&null!=t||(t=""),this.base.firstChild.setAttribute("placeholder",String(t))},dhtmlXCombo.prototype.setTemplate=function(t){for(var e in t)"undefined"!=typeof this.conf.template[e]&&("header"==e?this.conf.template[e]=window.dhx4.s2b(t[e]):this.conf.template[e]=String(t[e]));null!=t.columns?this._mcMakeTemplate(t.columns):this._mcDetachHeader();for(var e in this.t)this.t[e].obj.setText(this.t[e].item,this.t[e].item._conf.text);this._confirmSelect()},dhtmlXCombo.prototype.setSkin=function(t){t!=this.conf.skin&&(this.conf.skin=t,this.base.className="dhxcombo_"+this.conf.skin+(this.conf.enabled?"":" dhxcombo_disabled"),this.list.className="dhxcombolist_"+this.conf.skin+(null!=this.hdr?" dhxcombolist_multicolumn":""),null!=this.hdr&&(this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr"))},dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild},dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)]},dhtmlXCombo.prototype.getList=function(){return this.list},dhtmlXCombo.prototype.getBase=function(){return this.base},dhtmlXCombo.prototype.getParent=function(){return this.DOMParent},dhtmlXCombo.prototype.forEachOption=function(t){for(var e=0;e<this.list.childNodes.length;e++)t.apply(window,[this._getOption(this.list.childNodes[e]._optId,e)])},dhtmlXCombo.prototype.setFocus=function(){this.conf.enabled&&this.base.firstChild.focus()},dhtmlXCombo.prototype.setFontSize=function(t,e){null!=t&&(this.base.firstChild.style.fontSize=t),null!=e&&(this.list.style.fontSize=e)},dhtmlXCombo.prototype.getOption=function(t){for(var e=null,n=null,o=0;o<this.list.childNodes.length;o++)if(null==e){var i=this.list.childNodes[o]._optId;this.t[i].obj.getValue(this.t[i].item)==t&&(e=i,n=o)}return null==e?null:this._getOption(e,n)},dhtmlXCombo.prototype.getOptionByIndex=function(t){return 0>t?null:null==this.list.childNodes[t]?null:this._getOption(this.list.childNodes[t]._optId,t)},dhtmlXCombo.prototype.getOptionByLabel=function(t){for(var e=null,n=null,o=0;o<this.list.childNodes.length;o++)if(null==e){var i=this.list.childNodes[o]._optId;this.t[i].obj.getText(this.t[i].item,!0)==t&&(e=i,n=o)}return null==e?null:this._getOption(e,n)},dhtmlXCombo.prototype.getSelectedIndex=function(){return this._getOptionProp(this.conf.last_selected,"index",-1)},dhtmlXCombo.prototype.getSelectedText=function(){return this._getOptionProp(this.conf.last_selected,"text","")},dhtmlXCombo.prototype.getSelectedValue=function(){return this._getOptionProp(this.conf.temp_selected||this.conf.last_selected,"value",null)},dhtmlXCombo.prototype.getActualValue=function(){return this.base.childNodes[1].value},dhtmlXCombo.prototype.getComboText=function(){return this.base.childNodes[0].value},dhtmlXCombo.prototype.getIndexByValue=function(t){var e=this.getOption(t);return null!=e?e.index:-1},dhtmlXCombo.prototype.setComboText=function(t){1==this.conf.allow_free_text&&(this.unSelectOption(),this.conf.last_text=this.base.firstChild.value=t,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())},dhtmlXCombo.prototype.setComboValue=function(t){var e=this.getOption(t);null!=e?this.selectOption(e.index):(this.conf.last_value=t,this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="true")},dhtmlXCombo.prototype.selectOption=function(t){if(!(0>t||t>=this.list.childNodes.length)){var e=this.list.childNodes[t]._optId;this._setSelected(e,this._isListVisible(),!0),this._confirmSelect("script")}},dhtmlXCombo.prototype.unSelectOption=function(){null!=this.conf.last_hover&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null),this.base.firstChild.value="",0!=this.conf.f_mode&&this._filterOpts(!0),this._hideList(),this._updateTopImage(null),this._confirmSelect("script")},dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect("script")},dhtmlXCombo.prototype.enable=function(t){t="undefined"==typeof t?!0:window.dhx4.s2b(t),this.conf.enabled!=t&&(this.conf.enabled=t,t?(this.base.className="dhxcombo_"+this.conf.skin,this.base.firstChild.removeAttribute("disabled")):(this._hideList(),this.base.className="dhxcombo_"+this.conf.skin+" dhxcombo_disabled",this.base.firstChild.setAttribute("disabled","true")),this._updateTopImage(this.conf.last_selected))},dhtmlXCombo.prototype.disable=function(t){t="undefined"==typeof t?!0:window.dhx4.s2b(t),this.enable(!t)},dhtmlXCombo.prototype.isEnabled=function(){return 1==this.conf.enabled},dhtmlXCombo.prototype.show=function(t){t="undefined"==typeof t?!0:window.dhx4.s2b(t),this.base.style.display=1==t?"":"none"},dhtmlXCombo.prototype.hide=function(t){"undefined"==typeof t&&(t=!0),this.show(!t)},dhtmlXCombo.prototype.isVisible=function(){return""==this.base.style.display},dhtmlXCombo.prototype.setFilterHandler=function(t){"function"==typeof t?(this.conf.f_func=t,this.conf.f_mode=!0,this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null):"string"==typeof t&&"function"==typeof window[t]?(this.conf.f_func=window[t],this.conf.f_mode=!0,this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null):this.conf.f_func=null},dhtmlXCombo.prototype.enableFilteringMode=function(t,e,n,o){1==t||"between"==t?(this.conf.f_mode=1==t?"start":"between",null!=e?(this.conf.f_url=e,this.conf.f_cache=window.dhx4.s2b(n),this.conf.f_dyn=window.dhx4.s2b(o)):(this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)):(this.conf.f_mode=!1,this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)},dhtmlXCombo.prototype.filter=function(t,e){for(var n=0;n<this.list.childNodes.length;n++){var o=t.apply(window,[this._getOption(this.list.childNodes[n]._optId,n)]);this.list.childNodes[n].style.display=o===!0?"":"none"}"undefined"!=typeof e&&1!=e||this._showList(!0)},dhtmlXCombo.prototype.sort=function(t){for(var e=[],n=0;n<this.list.childNodes.length;n++){var o=this.list.childNodes[n]._optId;e.push([o,this._getOption(o,n)])}for("asc"==t||"desc"==t?(k=!0,e.sort(function(e,n){e=e[1].text_option.toLowerCase(),n=n[1].text_option.toLowerCase();var o="asc"==t?1:-1;return e>n?o:-1*o})):"function"!=typeof t&&"function"!=typeof window[t]||("function"==typeof window[t]&&(t=window[t]),e.sort(function(e,n){return t.apply(window,[e[1],n[1]])}));this.list.childNodes.length>0;)this.list.removeChild(this.list.lastChild);for(var n=0;n<e.length;n++)this.list.appendChild(this.t[e[n][0]].item)},dhtmlXCombo.prototype.enableAutocomplete=function(t){t="undefined"==typeof t?!0:window.dhx4.s2b(t),this.conf.f_ac=t},dhtmlXCombo.prototype.disableAutocomplete=function(t){t="undefined"==typeof t?!0:window.dhx4.s2b(t),this.enableAutocomplete(!t)},dhtmlXCombo.prototype.allowFreeText=function(t,e){this.conf.allow_free_text="undefined"==typeof t?!0:window.dhx4.s2b(t),this.conf.free_text_empty="undefined"==typeof e?!1:window.dhx4.s2b(e)},dhtmlXCombo.prototype._checkForMatch=function(t){for(var e=window.dhx4.trim(this.base.firstChild.value).toLowerCase(),n=null,o=this.list.firstChild;null!=o;){if(""==o.style.display&&null!=o._optId){var i=window.dhx4.trim(this.t[o._optId].obj.getText(o,!0)).toLowerCase();e==i&&(n=o._optId,o=null)}null!=o&&(o=o.nextSibling)}null==this.conf.last_match?null!=n?(this._setSelected(n,!0,!0),this.conf.last_match=n):"between"==this.conf.f_mode&&1!=t||(this._setSelected(null,!0,!0),this.conf.last_match=null):null!=n?n!=this.conf.last_match&&(this._setSelected(n,!0,!0),this.conf.last_match=n):(this._setSelected(null,!0,!0),this.conf.last_match=null)},dhtmlXCombo.prototype._selectRange=function(t,e){1==this.conf.combo_focus&&window.dhx4.selectTextRange(this.base.firstChild,t,e)},dhtmlXCombo.prototype.openSelect=function(){this._isListVisible()||this._showList()},dhtmlXCombo.prototype.closeAll=function(){this._hideList()},dhtmlXCombo.prototype._showList=function(t){if(0==this._getListVisibleCount())return void(t&&this._isListVisible()&&this._hideList());if(this._isListVisible())return void this._checkListHeight();this.list.style.zIndex=window.dhx4.zim.reserve(this.conf.list_zi_id),null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.zIndex=Number(this.list.style.zIndex)+1),this.list.style.visibility="hidden",this.list.style.display="",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.visibility=this.list.style.visibility,this.hdr.style.display=this.list.style.display);var e=null!=this.hdr&&1==this.conf.template.header?this.hdr.offsetHeight:0;this.list.style.width=Math.max(this.conf.opts_width||this.conf.col_w||0,this.conf.combo_width)+"px",this.list.style.top=window.dhx4.absTop(this.base)+e+this.base.offsetHeight-1+"px",this.list.style.left=window.dhx4.absLeft(this.base)+"px",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.width=this.list.style.width,this.hdr.style.left=this.list.style.left,this.hdr.style.top=parseInt(this.list.style.top)-e+"px"),this._checkListHeight(),this.list.style.visibility="visible",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.visibility="visible"),this.callEvent("onOpen",[])},dhtmlXCombo.prototype._hideList=function(){this._isListVisible()&&(window.dhx4.zim.clear(this.conf.list_zi_id),this.list.style.display="none",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.display="none"),this.conf.clear_click=!1,this.callEvent("onClose",[]))},dhtmlXCombo.prototype._isListVisible=function(){return""==this.list.style.display},dhtmlXCombo.prototype._getListVisibleCount=function(){for(var t=0,e=0;e<this.list.childNodes.length;e++)t+=""==this.list.childNodes[e].style.display?1:0;return t},dhtmlXCombo.prototype._checkListHeight=function(){if(this._isListVisible()){if(null==this.conf.item_h){for(var t=this.list.firstChild;null!=t;)""==t.style.display?(this.conf.item_h=t.offsetHeight+(null!=this.hdr?-1:0),t=null):t=t.nextSibling;t=null}var e=window.dhx4.screenDim(),n=window.dhx4.absTop(this.base),o=this.base.offsetHeight,i=null!=this.hdr&&1==this.conf.template.header?this.hdr.offsetHeight:0,s=Math.max(0,Math.floor((n+i-e.top)/this.conf.item_h)),l=Math.max(0,Math.floor((e.bottom-(n+o+i))/this.conf.item_h)),d=this._getListVisibleCount();l<Math.min(this.conf.opts_count_min,d)&&s>l&&(l=null);var a=Math.min(null==l?s:l,this.conf.opts_count,d),r=d>a?a*this.conf.item_h+"px":"",h=this.conf.sp[this.conf.skin][null!=this.hdr&&1==this.conf.template.header?"hdr_ofs":"list_ofs"];this.list.style.height=r,this.list.style.top=(null==l?n-this.list.offsetHeight+h:n+o+i-h)+"px",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.top=(null==l?n-i-this.list.offsetHeight+h:n+o-h)+"px")}},dhtmlXCombo.prototype._scrollToItem=function(t){var e=this.t[t].item.offsetTop,n=e+this.t[t].item.offsetHeight,o=this.list.scrollTop,i=o+this.list.clientHeight;o>e?this.list.scrollTop=e+(null!=this.hdr&&1==this.conf.template.header?1:0):n>i&&(this.list.scrollTop=n-this.list.clientHeight+(null!=this.hdr&&1==this.conf.template.header?-this.conf.sp[this.conf.skin].scr_ofs:0))},dhtmlXCombo.prototype._setSelected=function(t,e,n,o){return this.conf.temp_selected=null,n&&this._updateTopImage(t),null!=t&&this.conf.last_hover==t?void(e&&this._scrollToItem(t)):(null!=this.conf.last_hover&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null,null==t&&this.callEvent("onSelectionChange",[])),void(null!=t&&(this.t[t].obj.setSelected(this.t[t].item,!0),this.conf.last_hover=t,1!=o&&(this.conf.temp_selected=t,this.callEvent("onSelectionChange",[])),"select"==this.conf.s_mode&&this.t[t].item==this.t[t].item.parentNode.lastChild&&this._subloadRequest(),e&&this._scrollToItem(t))))},dhtmlXCombo.prototype._subloadRequest=function(){if(null!=this.conf.f_url&&1==this.conf.f_dyn&&0==this.conf.f_dyn_end){var t="mask="+encodeURIComponent(this.conf.f_mask)+"&pos="+this.list.childNodes.length,e=this,n=function(t){e.conf.f_cache&&e.conf.f_cache_data[e.conf.f_mask].data.push(t.xmlDoc.responseXML);var o=e.list.childNodes.length;e.conf.f_loading=!0,e.load(t.xmlDoc.responseXML),e.conf.f_loading=!1,o==e.list.childNodes.length&&(e.conf.f_dyn_end=!0,e.conf.f_cache&&(e.conf.f_cache_data[e.conf.f_mask].dyn_end=!0)),n=e=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(this.conf.f_url,t,n):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(this.conf.f_url+(String(this.conf.f_url).indexOf("?")>=0?"&":"?")+t,n)}},dhtmlXCombo.prototype.addOption=function(t,e,n,o,i){var s=null;if(t instanceof Array){for(var l=0;l<t.length;l++)if("undefined"!=typeof t[l])if(t[l]instanceof Array)d=this._renderOption({value:t[l][0],text:t[l][1],css:t[l][2],img:t[l][3]}),null==s&&1==window.dhx4.s2b(t[l][4])&&(s=d);else{var d=this._renderOption(t[l]);null==s&&1==window.dhx4.s2b(t[l].selected)&&(s=d)}}else{var d=this._renderOption({value:t,text:e,css:n,img:o});null==s&&1==window.dhx4.s2b(i)&&(s=d)}null!=s&&(this._setSelected(s,this._isListVisible(),!0),this._confirmSelect("onInit"))},dhtmlXCombo.prototype.updateOption=function(t,e,n,o){var i=this._getOptionId(t);null!=i&&(this.t[i].obj.update(this.t[i].item,{value:e,text:n,css:o}),this.conf.last_selected==i&&(this.conf.last_text=this.base.firstChild.value=this.t[i].obj.getText(this.t[i].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase()))},dhtmlXCombo.prototype.deleteOption=function(t){for(var e in this.t){var n=this.t[e].obj.getValue(this.t[e].item);n==t&&this._removeOption(e)}this._isListVisible()&&this._showList(!0)},dhtmlXCombo.prototype.clearAll=function(t){t="undefined"==typeof t?!0:window.dhx4.s2b(t);for(var e in this.t)this._removeOption(e);this.conf.tm_hover&&window.clearTimeout(this.conf.tm_hover),this.conf.last_hover=null,this.conf.last_selected=null,this.list.scrollTop=0,1==t&&this._hideList()},dhtmlXCombo.prototype._renderOption=function(t){var e=window.dhx4.newId(),n=document.createElement("DIV");n._optId=e,n._tpl=this.conf.template,"undefined"==typeof t.img&&"undefined"!=typeof t.img_src&&(t.img=t.img_src,delete t.img_src),"undefined"==typeof t.img_dis&&"undefined"!=typeof t.img_src_dis&&(t.img_dis=t.img_src_dis,delete t.img_src_dis),t.img_path=this.conf.img_path,t.img_def=this.conf.img_def,t.img_def_dis=this.conf.img_def_dis,this.list.appendChild(n);var o=this._isListVisible()&&1==window.dhx4.isFF;if(1==o){this.list.scrollTop;this.list.scrollTop-=1}return null!=this.hdr&&(t.multicol=!0),this.t[n._optId]={obj:this.modes[this.conf.opts_type].render(n,t),item:n,conf:{type:this.conf.opts_type}},n=null,1==o&&(this.list.scrollTop+=1),e},dhtmlXCombo.prototype._removeOption=function(t){this.t[t].obj.destruct(this.t[t].item),this.t[t].obj=null,this.t[t].item.parentNode.removeChild(this.t[t].item),this.t[t].item=null,this.t[t].conf=null,this.t[t]=null,delete this.t[t],this.conf.last_hover==t&&(this.conf.last_hover=null),this.conf.last_selected==t&&(this.conf.last_selected=null,this._confirmSelect("onDelete"))},dhtmlXCombo.prototype._confirmSelect=function(t,e){var n=!1;if("undefined"==typeof e&&(e=!0),this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm),null!=this.conf.last_hover)n=n||this.conf.last_value!=this._getOptionValue(this.conf.last_hover),this.conf.last_match=this.conf.last_selected=this.conf.last_hover,this.conf.last_value=this._getOptionValue(this.conf.last_selected),this.conf.last_text=this.base.firstChild.value=this.t[this.conf.last_selected].obj.getText(this.t[this.conf.last_selected].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="false";else{if(!(this.conf.allow_free_text||""==this.base.firstChild.value&&this.conf.allow_empty_value))return this._cancelSelect(!0),void this._updateTopImage(this.conf.last_selected);n=n||this.conf.last_text!=this.base.firstChild.value,this.conf.last_match=this.conf.last_value=this.conf.last_selected=null,this.conf.last_text=this.base.firstChild.value,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_text,this.base.childNodes[2].value="true"}this.conf.f_ac&&"start"==this.conf.f_mode&&(this.conf.f_ac_text="","blur"!=t&&this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length)),e&&this._hideList(),1==n&&"onInit"!=t&&"onDelete"!=t&&(this.callEvent("onSelectionChange",[]),this.callEvent("onChange",[this.conf.last_value,this.conf.last_text]))},dhtmlXCombo.prototype._cancelSelect=function(t){this._hideList(),1==t&&0==this.conf.allow_free_text&&1==this.conf.free_text_empty?(this.conf.f_server_last=this.conf.last_match=this.conf.last_value=this.conf.last_selected=null,this.base.childNodes[1].value=this.conf.last_text=this.base.firstChild.value="",this.base.childNodes[2].value="false"):this.base.firstChild.value=this.conf.last_text,0!=this.conf.f_mode&&this._filterOpts(!0)},dhtmlXCombo.prototype._getOption=function(t,e){if(!this.t[t])return null;if("undefined"==typeof e&&(e=-1),0>e)for(var n=0;n<this.list.childNodes.length;n++)0>e&&this.list.childNodes[n]._optId==t&&(e=n);var o={value:this.t[t].obj.getValue(this.t[t].item),text:this.t[t].obj.getText(this.t[t].item),text_input:this.t[t].obj.getText(this.t[t].item,!0),text_option:this.t[t].obj.getText(this.t[t].item,null,!0),css:this.t[t].obj.getCss(this.t[t].item),selected:t==this.conf.last_selected,index:e};if("function"==typeof this.t[t].obj.getExtraData){var i=this.t[t].obj.getExtraData(this.t[t].item);for(var s in i)"undefined"==typeof o[s]&&(o[s]=i[s])}return o},dhtmlXCombo.prototype._getOptionProp=function(t,e,n){if(null!=t){var o=this._getOption(t);if(null!=o)return o[e]}return n},dhtmlXCombo.prototype._getOptionId=function(t){for(var e=null,n=0;n<this.list.childNodes.length;n++)if(null==e){var o=this.list.childNodes[n]._optId;t==this.t[o].obj.getValue(this.t[o].item)&&(e=o)}return e},dhtmlXCombo.prototype._getOptionValue=function(t){return this._getOptionProp(t,"value",null)},dhtmlXCombo.prototype.setSize=function(t){this.conf.combo_width=parseInt(t)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),this.base.style.width=Math.max(0,this.conf.combo_width)+"px",this._adjustBase()},dhtmlXCombo.prototype._adjustBase=function(){this.base.firstChild.style.width=Math.max(0,this.conf.combo_width-24-(this.conf.combo_image?23:0))+"px",this.base.firstChild.style.marginLeft=this.conf.combo_image?"23px":"0px"},dhtmlXCombo.prototype.setOptionWidth=function(t){this.conf.opts_width=parseInt(t)||null},dhtmlXCombo.prototype.setOptionIndex=function(t,e){if(!(isNaN(e)||0>e)){var n=this.getOption(t);if(null!=n&&e!=n.index){var o=this.list.childNodes[n.index];o.parentNode.removeChild(o),null!=this.list.childNodes[e]?this.list.insertBefore(o,this.list.childNodes[e]):this.list.appendChild(o),o=null}}},dhtmlXCombo.prototype.getOptionsCount=function(){return this.list.childNodes.length},dhtmlXCombo.prototype._mcMakeTemplate=function(t){var e="",n="";this.conf.col_w=0;for(var o=0;o<t.length;o++){var i=Number(parseInt(t[o].width)||50),s=t[o].css||"",l=0==o&&1==window.dhx4.isIE6?"_first":"";n+="<div class='dhxcombo_cell"+l+" "+s+"' style='width:"+i+"px;'><div class='dhxcombo_cell_text'>"+(t[o].option||"&nbsp;")+"</div></div>",e+="<div class='dhxcombo_hdrcell"+l+" "+s+"' style='width:"+i+"px;'><div class='dhxcombo_hdrcell_text'>"+(t[o].header||"&nbsp;")+"</div></div>",this.conf.col_w+=i+1}var i=500,d=document.createElement("DIV");d.style.position="absolute",d.style.top="10px",
d.style.left=2*-i+"px",d.style.width=i+"px",d.style.height="50px",d.style.overflowY="scroll",d.innerHTML="<div>&nbsp;</div>",document.body.appendChild(d),this.conf.col_w+=i-d.firstChild.offsetWidth+10,d.parentNode.removeChild(d),d=null,this.conf.template.option=n,this._mcAttachHeader(e),this.list.className+=" dhxcombolist_multicolumn"},dhtmlXCombo.prototype._mcAttachHeader=function(t){null==this.hdr&&(this.hdr=document.createElement("DIV"),this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr",this.hdr.style.display="none",this.list.parentNode.insertBefore(this.hdr,this.list),"function"==typeof window.addEventListener?this.hdr.addEventListener("mousedown",this._doOnListMouseDown,!1):this.hdr.attachEvent("onmousedown",this._doOnListMouseDown),"checkbox"==this.conf.opts_type&&1==this.conf.combo_image&&(this.conf.combo_image=!1,null!=this.base.lastChild.className.match(/dhxcombo_top_image/)&&this.base.removeChild(this.base.lastChild),this._adjustBase())),this.hdr.innerHTML="<div class='dhxcombo_hdrtext'>"+t+"</div>"},dhtmlXCombo.prototype._mcDetachHeader=function(){null!=this.hdr&&("function"==typeof window.addEventListener?this.hdr.removeEventListener("mousedown",this._doOnListMouseDown,!1):this.hdr.detachEvent("onmousedown",this._doOnListMouseDown),this.hdr.parentNode.removeChild(this.hdr),this.hdr=null),this.conf.col_w=null,this.conf.item_h=null},dhtmlXCombo.prototype.modes={},dhtmlXCombo.prototype.doWithItem=function(t,e){var n=t>=0&&t<this.list.childNodes.length?this.list.childNodes[t]._optId:null;if(null==n)return null;if("function"!=typeof this.t[n].obj[e])return null;for(var o=[this.t[n].item],i=2;i<arguments.length;i++)o.push(arguments[i]);return this.t[n].obj[e].apply(this.t[n].obj,o)},dhtmlXCombo.prototype.modes.option={image:!1,html:!1,option_css:"dhxcombo_option_text",render:function(t,e){return t._conf={value:e.value,css:""},t.className="dhxcombo_option",t.innerHTML="<div class='"+this.option_css+"'>&nbsp;</div>",null!=e.css&&(t.lastChild.style.cssText=e.css,t._conf.css=e.css),this.setText(t,e.text),this},destruct:function(t){t._conf=null},update:function(t,e){t._conf.value=e.value,t._conf.css=e.css,t.lastChild.style.cssText=e.css,this.setText(t,e.text)},setText:function(t,e){t._conf.text=e;var n="object"==typeof e?window.dhx4.template(t._tpl.option,this.replaceHtml(t._conf.text),!0):window.dhx4.trim(this.replaceHtml(t._conf.text)||"");t.lastChild.innerHTML=0==n.length?"&nbsp;":n},getText:function(t,e,n){return window.dhx4.s2b(e)&&"object"==typeof t._conf.text?window.dhx4.template(t._tpl.input,t._conf.text,!0):window.dhx4.s2b(n)&&"object"==typeof t._conf.text?window.dhx4.template(t._tpl.option,t._conf.text,!0):t._conf.text},getValue:function(t){return t._conf.value},getCss:function(t){return t._conf.css},setSelected:function(t,e){t.className="dhxcombo_option"+(e?" dhxcombo_option_selected":"")},isSelected:function(t){return String(t.className).indexOf("dhxcombo_option_selected")>=0},getExtraData:function(){return{type:"option"}},replaceHtml:function(t){if(1==this.html)return t;if("object"==typeof t){var e={};for(var n in t)e[n]=this.replaceHtml(t[n])}else var e=t.replace(/[\<\>\&\s]/g,function(t){switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case" ":return"&nbsp;"}return t});return e}},dhtmlXCombo.prototype.modes.checkbox={image:!0,html:!0,image_css:"dhxcombo_checkbox dhxcombo_chbx_#state#",option_css:"dhxcombo_option_text dhxcombo_option_text_chbx",render:function(t,e){return null==this.image_css_regexp&&(this.image_css_regexp=new RegExp(this.image_css.replace("#state#","\\d*"))),t._conf={value:e.value,css:"",checked:window.dhx4.s2b(e.checked)},t.className="dhxcombo_option",1==e.multicol?(e.text.checkbox="<div class='"+String(this.image_css).replace("#state#",t._conf.checked?"1":"0")+"'></div>&nbsp;",t.innerHTML="<div class='"+dhtmlXCombo.prototype.modes.option.option_css+"'></div>"):t.innerHTML="<div class='"+String(this.image_css).replace("#state#",t._conf.checked?"1":"0")+"'></div><div class='"+this.option_css+"'>&nbsp;</div>",null!=e.css&&(t.lastChild.style.cssText+=e.css,t._conf.css=e.css),this.setText(t,e.text),this},setChecked:function(t,e){t._conf.checked=window.dhx4.s2b(e);var n=String(this.image_css).replace("#state#",t._conf.checked?"1":"0");this._changeChbxCss(t.childNodes,n)},_changeChbxCss:function(t,e){for(var n=0;n<t.length;n++)null!=t[n].tagName&&null!=t[n].className&&null!=t[n].className.match(this.image_css_regexp)?t[n].className=e:t[n].childNodes.length>0&&this._changeChbxCss(t[n].childNodes,e)},isChecked:function(t){return 1==t._conf.checked},getExtraData:function(t){return{type:"checkbox",checked:t._conf.checked}},optionClick:function(t,e,n){for(var o=!0,i=e.target||e.srcElement;1==o&&null!=i&&i!=t&&null!=i.className;)if(null!=i.className.match(this.image_css_regexp)){var s=[t._conf.value,!t._conf.checked];n.callEvent("onBeforeCheck",s)===!0&&(this.setChecked(t,!this.isChecked(t)),n.callEvent("onCheck",s)),o=!1,s=null}else i=i.parentNode;return i=n=t=null,o},getTopImage:function(){return""},topImageClick:function(){return!0}},dhtmlXComboExtend("checkbox","option"),dhtmlXCombo.prototype.setChecked=function(t,e){this.doWithItem(t,"setChecked",e)},dhtmlXCombo.prototype.getChecked=function(){for(var t=[],e=0;e<this.list.childNodes.length;e++)this.isChecked(e)&&t.push(this._getOptionProp(this.list.childNodes[e]._optId,"value",""));return t},dhtmlXCombo.prototype.isChecked=function(t){return this.doWithItem(t,"isChecked")},dhtmlXCombo.prototype.modes.image={image:!0,html:!0,image_css:"dhxcombo_image",option_css:"dhxcombo_option_text dhxcombo_option_text_image",render:function(t,e){return t._conf={value:e.value,css:""},t.className="dhxcombo_option",t.innerHTML="<div class='"+this.image_css+"'></div><div class='"+this.option_css+"'>&nbsp;</div>",null!=e.css&&(t.lastChild.style.cssText+=e.css,t._conf.css=e.css),this.setText(t,e.text),this.setImage(t,e.img,e.img_dis,e.img_path,e.img_def,e.img_def_dis),this},update:function(t,e){t._conf.value=e.value,t._conf.css=e.css,t.lastChild.style.cssText=e.css,this.setText(t,e.text),this.setImage(t,e.img,e.img_dis,e.img_path,e.img_def,e.img_def_dis)},setImage:function(t,e,n,o,i,s){e=null!=e&&e.length>0?o+e:null!=i&&i.length>0?o+i:null,n=null!=n&&n.length>0?o+n:null!=s&&s.length>0?o+s:1==s?e:null,t._conf.img=e,t._conf.img_dis=n,t.firstChild.style.backgroundImage=null!=e?"url("+e+")":"none"},getExtraData:function(){return{type:"image"}},getTopImage:function(t,e){var n=e?"img":"img_dis";return null!=t&&null!=t._conf[n]?"<div class='"+this.image_css+"' style='background-image:url("+t._conf[n]+");'></div>":""}},dhtmlXComboExtend("image","option"),dhtmlXCombo.prototype.setDefaultImage=function(t,e){null!=t&&(this.conf.img_def=t),null!=e&&(this.conf.img_def_dis=e)},dhtmlXCombo.prototype.setImagePath=function(t){this.conf.img_path=t};